---
layout: post
title: '캡스톤-리눅스(Linux and Docker and SSH)'
category: Project-plan
tag: Linux
---
# 목차
- [목차](#목차)
- [01 우분투(리눅스) 설치](#01-우분투리눅스-설치)
  - [파티션 ~ 우분투 다운로드](#파티션--우분투-다운로드)
  - [우분투 설치](#우분투-설치)
  - [물리 디스크와 논리 디스크](#물리-디스크와-논리-디스크)
  - [듀얼 부팅에 왜 파티션이 필요한가?](#듀얼-부팅에-왜-파티션이-필요한가)
- [02 VS CODE 설치](#02-vs-code-설치)
  - [한글 변경](#한글-변경)
  - [설치](#설치)
- [03 도커 설치](#03-도커-설치)
- [04 라즈베리 파이 설치](#04-라즈베리-파이-설치)
  - [라즈베리 파이 도커 설치](#라즈베리-파이-도커-설치)
    - [추가: Docker 관리 프로그램인 Portainer 설치](#추가-docker-관리-프로그램인-portainer-설치)
  - [라즈베리 파이 VS code 설치](#라즈베리-파이-vs-code-설치)
  - [라즈베리 파이 Pycharm 설치](#라즈베리-파이-pycharm-설치)
- [05 개념](#05-개념)
  - [컨테이너 개념](#컨테이너-개념)
  - [SSH 개념](#ssh-개념)
- [06 Docker 실행](#06-docker-실행)
  - [Docker](#docker)
  - [Docker 파일 및 이미지 생성](#docker-파일-및-이미지-생성)
  - [Docker로 파이썬 코드 실행](#docker로-파이썬-코드-실행)
- [07 리눅스에서 파이썬 실행하는 법](#07-리눅스에서-파이썬-실행하는-법)
  - [파이썬 명령어 연습](#파이썬-명령어-연습)
- [08 SSH](#08-ssh)
  - [VSCODE로 SSH 연결](#vscode로-ssh-연결)
  - [Pycharm으로 SSH 연결을 통한 서버에서 코드 Run 하기](#pycharm으로-ssh-연결을-통한-서버에서-코드-run-하기)
  - [Pycharm vs VScode](#pycharm-vs-vscode)
- [09 리눅스 명령어 모음](#09-리눅스-명령어-모음)
- [10 기타](#10-기타)
  - [라즈베리파이로 포트 포워딩을 통한 학교 -\> 집에 있는 라즈베리파이 통신](#라즈베리파이로-포트-포워딩을-통한-학교---집에-있는-라즈베리파이-통신)




# 01 우분투(리눅스) 설치
원래 노트북은 윈도우 운영체제가 깔려있었는데, 리눅스를 사용해야돼서 듀얼 부팅 실행해봤다.

## 파티션 ~ 우분투 다운로드
참고 링크: <https://wooriel.tistory.com/75>

1. cmd(실행 명령 창)에 들어간다.
2. diskmgmt.msc을 입력한다.
3. 화면에 표시되는 디스크 관리 창에서 C 드라이브를 우클릭, 볼륨 축소 메뉴 클릭  
  ![](/asset/images/20230203115038.png)  
4. 축소할 공간을 입력하고 축소 버튼 클릭, 이때 축소되는 공간은 C 드라이브에서 분할된 빈 공간을 의미한다. 우분투에서 사용할 메모리를 의미한다. 가능하면 128GB(128000MB)을 할당해주고 간단한 용도로 사용할 경우에는 32GB(32000MB) 정도만 할당하면 된다고 한다.   
  ![](/asset/images/20230203115925.png)  
5. [우분투 디스크 이미지 받기]
<https://releases.ubuntu.com/20.04/>
ubuntu-20.04.5-desktop-amd64.iso를 설치한다(2023-02-03 기준)
6. [rufus 설치]
<https://rufus.ie/ko/>
클릭하여 다운 받는다.

  ![](/asset/images/20230203122722.png)    
7. USB를 꽂은 후 다운 받은 rufus 프로그램을 실행한다. 장치에서 해당 USB를 선택한다.
8. 부트 선택에서 우분투 디스크 이미지를 선택한다.
   
  ![](/asset/images/20230203122942.png)    

9. 파티션 방식은 GPT, 대상 시스템은 UEFI로 선택
10. 그리고 시작을 누른다음 완료되면 닫기를 클릭
  
## 우분투 설치
1. 바이오스 진입을 해야하므로 각 PC의 바이오스 진입키를 검색하여 진입한다. 필자의 경우 LG gram인데, 
F2를 눌러도 진입이 안돼서 다른 방법으로 진입해야했다.

LG gram일 경우 BIOS 진입 방법
  <https://www.lge.co.kr/support/solutions-1437631235112>

2. 바이오스 진입시 [ Boot ] - [Boot type order] 메뉴로 이동하면 부팅 순서를 바꿀 수 있다. 현재 USB에 우분투 부트 파일이 저장되어있으므로 USB를 맨위로 올려준다. 이 부분은 각 PC 별로 바이오스 타입이 다를 수 있어서 조금씩 접근 방법이 다를 수 있다. 하지만 공통적으로 부팅 순서를 바꿔주는 메뉴에 들어가서 USB 장치가 부팅순서가 맨 앞으로 오도록 하면 된다.

3. F10을 눌러 설정을 저장하고 마친다. 컴퓨터가 재부팅되면 우분투 화면이 뜰 것이고 설치를 진행할 것이다. 설치가 완료되면 "Please remove the installation medium"이라는 문구가 뜨는데, 이는 USB를 제거하고 Enter를 누르라는 의미이다.

4. 본격적으로 컴퓨터에 우분투를 설치한다. 원하는 언어로 설치를 진행하고 설치는 "일반 설치", 서드 파티라는 단어가 포함된 문구도 체크하여 설치


5. 설치 형식 부분에서 "기타"를 클릭

6. 해당 부분에서 아까 파티션 했던 디스크를 지정해줘야한다. 빈 공간 또는 free space라고 명명된 공간 중에서 아까 분할했던 크기와 동일한 공간의 디스크를 더블 클릭한다.

7. "주(Primary)", "논리(Logical)" 중에서 논리 선택하기
8. 사용 용도(Use as)를 Ext4로 선택 -> 루트를 "/"로 선택
9. 이후 지금 설치 누르기
10. 이렇게 되면 우분투는 설치가된다. 리눅스를 사용하여 용량이 높은 작업을 수행할 경우 여유있게 128 GB 정도 할당하고 만약 그렇지 않다면 32GB 정도를 할당하는 것을 추천한다.  


## 물리 디스크와 논리 디스크
C 드라이브를 SSD, D 드라이브를 HDD라고 하는데 이러한 물리적인 저장 장치를 물리 디스크라고한다. 여기서 물리라는 의미는 "눈에 보이는" 정도로 해석하면 될 것이다. 논리 디스크는 물리 디스크를 분할(Partition)하여 사용용도에 맞게 분할한 공간으로 하나의 물리 디스크에서 여러개의 공간으로 분할된 것을 의미한다.


## 듀얼 부팅에 왜 파티션이 필요한가?
두 운영체제가 사용하는 공간을 서로 간섭하지않고 보안을 유지하기위해서 파티션이 필요하다.

# 02 VS CODE 설치

## 한글 변경
참고: <https://coding-factory.tistory.com/495>  
처음 리눅스를 설치한 후 영/한키를 눌러도 영어에서 한글로 바뀌지 않을 것이다. 이는 영/한 변환 키 기본 설정이 오른쪽 alt(영/한 변환키)가 아니기 때문이다. 따라서 이를 바꿔주기 위해서 설정을 바꿔준다.

## 설치
참고: <https://mryeo.tistory.com/16>  
위 링크를 참고하여 설치하자. 잘 설명되어있으니 확인하자. 참고로 cd는 디렉토리 이동 명령, pwd는 현재 디렉토리 확인 명령어이다.

# 03 도커 설치
참고<https://www.leafcats.com/153>

**sudo wget -qO- http://get.docker.com/ | sh**

위의 명령어를 셸에 실행
이후 docker가 제대로 설치되었는지 확인하기 위해 docker version 명령어 실행


# 04 라즈베리 파이 설치
<https://m.blog.naver.com/fuls/221021182061>
라즈베리 파이-모니터 연결: <https://brunch.co.kr/@topasvga/477>

## 라즈베리 파이 도커 설치
<https://jjeongil.tistory.com/1622>

### 추가: Docker 관리 프로그램인 Portainer 설치
Docker 이미지 관리 및 도커 세부사항을 웹사이트에서 확인 가능
<https://blog.dalso.org/raspberry-pi/raspberry-pi-4/7969>

## 라즈베리 파이 VS code 설치
<https://toopyo.tistory.com/entry/raspberrypi-vscode>

## 라즈베리 파이 Pycharm 설치









# 05 개념

## 컨테이너 개념
VM는 가상화를 위한 OS(VMWare)를 따로 설치하고 그 OS 내에 윈도우, 리눅스를 설치한다.
즉, 가상의 PC를 하나 새로 만들고 윈도우 리눅스를 설치한 다음 해당 가상머신의 OS 커널을 사용하여 명령을 처리한다.
여기서 VM을 돌리기위해 실행되는 OS를 Host OS, 그리고 가상 머신에 설치된 OS를 게스트 OS라고 한다.
하나의 Host OS로 여러개의 Guest OS를 설치시키고 각 어플리케이션(프로그램)마다 각자의 게스트 OS로 실행한다.  

컨테이너 방식은 호스트 OS와 비슷하지만 컨테이너 엔진이라는 소프트웨어가 동작하여 게스트 커널 관리를 컨테이너가 관리하도록 한다.  
커널은 하나의 OS 커널을 공유하여 사용하고 각 어플리케이션에서 필요한 실행 파일(라이브러리, 바이너리, 구성 파일등)을 패키지로 묶어 컨테이너 이미지로 생성하여 관리하므로 서로 다른 게스트 OS에 대해서 관리가 가능하다.  
예를 들어서 Ubuntu 이미지는 우분투를 실행시키기 위한 모든 파일을 가지고 있으며 Oracle 이미지는 Oracle을 실행시키기 위한 모든 파일을 가지고 있다.  
컨테이너에는 실행프로그램과 이에 필요한 컨테이너 이미지가 포함되어있다고 보면 된다.  
컨테이너 방식은 위 방식과 다르게 게스트 OS를 따로 설치할 필요가 없고 커널을 따로 사용하지않는다는 점에서 조금더 가볍고 관리하기가 단순해진다.   
+ 게스트 OS를 사용할때는 OS 구동에 필요한 자원을 미리 할당받아야하나, 컨테이너 방식은 OS 커널이 1개를 공유하여 사용하므로 자원을 미리 할당할 필요가 없다.  
단점으로는 하나의 커널을 사용하기 때문에 해당 커널을 공유하는 구조로 장애 받을시 다른 컨테이너에 영향을 줄 수 있으므로 안정성에 문제가 발생할 수 있다.  
도커는 실제 운영시 배포의 편의성을 위해 고안한 기술이라고 한다.


가상화는 단일한 물리 하드웨어 시스템에서 여러 시뮬레이션 환경이나 전용 리소스를 생성할 수 있는 기술입니다.

도커 이미지란?: <https://hoon93.tistory.com/48>
가상화와 컨테이너: <https://sangbeomkim.tistory.com/96>
컨테이너:<https://cloudmt.co.kr/?p=3927>
도커 개념:
1. <https://velog.io/@geunwoobaek/%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EB%B0%8F-%EB%8F%84%EC%BB%A4-%EA%B0%9C%EB%85%90%EC%A0%95%EB%A6%AC>
2. <https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html>

## SSH 개념
<https://opentutorials.org/module/432/3738>


# 06 Docker 실행

## Docker
가장 중요한 참고 링크: 
<https://eungbean.github.io/2019/03/22/jupyter-ssh/>

<https://tech.cloudmt.co.kr/2022/06/29/%EB%8F%84%EC%BB%A4%EC%99%80-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EC%9D%98-%EC%9D%B4%ED%95%B4-1-3-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%82%AC%EC%9A%A9%EB%B2%95/>

## Docker 파일 및 이미지 생성
우리는 어떤 모듈을 사용할지 아직 모름, 텐서플로우를 사용해야되면 텐서플로우의 이미지를 가져와야되고 우분투를 사용해야한다면 우분투 이미지를 가져와야함
TensorFlow 이미지 생성(예시):<https://ajdkfl6445.gitbook.io/study/devops/docker/make-image>

파이썬 이미지 생성: <https://afsdzvcx123.tistory.com/entry/Python-%ED%8C%8C%EC%9D%B4%EC%8D%AC-%EB%8F%84%EC%BB%A4-%ED%8C%8C%EC%9D%BC-%EB%B0%8F-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%A7%8C%EB%93%A4%EA%B8%B0>

파이썬 이미지 생성2: <https://anweh.tistory.com/71>

## Docker로 파이썬 코드 실행
<https://i-am-eden.tistory.com/32>


# 07 리눅스에서 파이썬 실행하는 법
1. 파이썬을 설치한다. 기본적으로 리눅스에는 파이썬이 설치되어있다고 하는데, 만약 없다면 설치해야한다. 
2. 파이썬 버전을 확인하기 위해서는 콘솔에 python3 --version이라고 치면 현재 파이썬 버전이 출력된다.
3. sudo apt-get update 를 입력하면 설치가능한 패키지 리스트를 업데이트한다. 해당 명령어는 실제로 컴퓨터에 패키지를 설치하지는 않고 패키지들의 현재 최신 버전을 업데이트하는 명령어에 해당한다.
4. sudo apt-get install python3.6 을 입력하면 파이썬 3.6 버전을 설치한다고 한다. 원하는 파이썬 버전을 설치하면 될 것 같다.
5. 파이썬 설치가 완료되면 파이썬 파일을 만들어준다. Visual Studio Code를 깔아서 파이썬 파일을 만들거나 vi 편집기로 콘솔에서 파이썬 파일을 만드는 방법이 있는데, 필자의 경우 파이썬 파일 작성은 VS code를 통해 작성했다.
6. 파이썬 파일을 실행하려면 해당 파이썬 파일이 존재하는 디렉토리로 콘솔 위치를 변경한다. cd (파일 경로) 로 실행시키려는 파이썬 파일이 존재하는 디렉토리 경로로 이동하자.
7. 해당 위치로 이동한 후 python3 (파일명).py를 입력하면 해당 파일을 실행한다.

참고(파이썬 설치): <https://python-guide-kr.readthedocs.io/ko/latest/starting/install3/linux.html>  
참고(sudo apt-get Update): <https://dev.plusblog.co.kr/22>

## 파이썬 명령어 연습
<https://dora-guide.com/linux-commands/>

# 08 SSH

## VSCODE로 SSH 연결
<https://bosungtea9416.tistory.com/entry/VScode%EB%A1%9C-%EC%84%9C%EB%B2%84%EC%97%90-SSH-%EC%9B%90%EA%B2%A9-%EC%A0%91%EC%86%8D%ED%95%98%EA%B8%B0>

## Pycharm으로 SSH 연결을 통한 서버에서 코드 Run 하기
<https://hanseokhyeon.tistory.com/entry/Pycharm-SSH%EB%A1%9C-%EB%A1%9C%EC%BB%AC%EC%97%90%EC%84%9C-%EC%84%9C%EB%B2%84-run%ED%95%98%EA%B8%B0>

## Pycharm vs VScode
<https://hashdork.com/ko/pycharm-vs-vs-code/>
포스팅한 블로거는 파이썬 프로젝트인 경우에는 파이참을 추천하고 파이썬 개발자(즉, 파이썬 파일이 적은 경우에는)인 경우에는 VS code를 추천한다는 것 같은데... 파이참이 더 끌리긴 한다.(자료도 눈앞에 보이고)

# 09 리눅스 명령어 모음

1. netstat  
    현재 열린 포트 번호나 네트워크 상황을 알려주는 명령어이다.  

    만약 설치가 되어있지않으면 "netstat command not found" 라고 뜨는데, apt install net-tools 라고 셸에서 실행하면 넷 툴을 설치한다.  
    
    netstat -lntp는 현재 네트워크의 포트 상황을 조사하는 명령어이다.
    PID는 Port ID와 같다.

    명령어 참조: <https://jungfo.tistory.com/93>
2. sudo  
    Super User do: 루트 권한을 허용하기 위해 붙여주는 명령어
3. wget vs curl  
    wget, curl 차이: <https://wooono.tistory.com/279>



# 10 기타

## 라즈베리파이로 포트 포워딩을 통한 학교 -> 집에 있는 라즈베리파이 통신
<https://poalim.tistory.com/12>